(()=>{"use strict";const t=function(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent};function e(t,e){e.forEach((e=>t.appendChild(e)))}function n(t,e){const n=document.createElement(t);void 0!==e&&n.setAttribute("class",e);for(var a=arguments.length,o=new Array(a>2?a-2:0),r=2;r<a;r++)o[r-2]=arguments[r];return o.forEach((t=>{n.setAttribute(t[0],t[1])})),n}const a=function(t,e){const n=function(t,e){const n=document.createElement(t);void 0!==e&&n.classList.add(e);for(var a=arguments.length,o=new Array(a>2?a-2:0),r=2;r<a;r++)o[r-2]=arguments[r];return o.forEach((t=>{n.setAttribute(t[0],t[1])})),n}("div",void 0);return void 0!==t&&n.setAttribute("class",t),void 0!==e&&n.setAttribute("id",e),n},o=function(t){return Number(getComputedStyle(t).getPropertyValue("transition-duration").slice(0,-1))},r=async function(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))},s={difficulties:{any:"Any Difficulty",easy:"Easy",medium:"Medium",hard:"Hard"},categories:["Any Category","General Knowledge","Entertainment: Books","Entertainment: Film","Entertainment: Music","Entertainment: Musicals, Theaters","Entertainment: Television","Entertainment: Video Games","Entertainment: Board Games","Science: Nature","Science: Computers","Science: Mathematics","Mythology","Sports","Geography","History","Politics","Art","Celebrities","Animals","Vehicles","Entertainment: Comics","Science: Gadgets","Entertainment: Anime, Manga","Entertainment: Cartoon, Animations"]},i="w-full flex flex-col p-2 gap-1",c="px-2 py-1 w-full rounded-md border-2 border-slate-900/5 bg-slate-400/20",l="text-sm text-slate-950/75 font-medium ml-2",d="text-center overflow-y-auto font-medium text-xl leading-normal  px-6 pt-6 sm:text-2xl md:text-3xl lg:leading-relaxed max-h-full",u="border-2 data-na:hover:bg-green-600/10 bg-slate-900  transition-colors font-medium capitalize data-na:active:bg-slate-50/25 grid place-items-center text-center lg:text-2xl rounded-xl h-10 lg:h-20 lg:w-full data-correct:border-green-500 data-correct:bg-green-800 data-wrong:border-red-500 data-wrong:bg-red-800 data-na:hover:border-green-500 data-correct:animate-ping-once data-wrong:animate-pulse-fast duration-300",m="grid h-20 cursor-pointer place-items-center rounded-xl border-2 bg-slate-900 text-center text-lg font-bold capitalize shadow-inner transition-colors data-na:hover:bg-green-600/10 data-na:active:bg-slate-50/40 data-correct:border-green-500 data-correct:bg-green-800 data-wrong:border-red-500 data-wrong:bg-red-800 data-na:hover:border-green-500 sm:text-2xl lg:w-full data-correct:animate-ping-once data-wrong:animate-pulse-fast duration-300",g=["text-red-800","text-orange-800","text-amber-700","text-yellow-700","text-lime-700","text-green-600","text-emerald-600"],p=class{static createStartForm(){const t=a("absolute z-10 rounded-lg w-full h-full grid items-center","start-form-container"),o=n("form","grid bg-slate-100 gap-2 px-2 py-4 transition-transform duration-500 rounded-md text-slate-950 w-4/5 mx-auto max-w-md",["action","#"]),r=n("button","justify-self-end mr-2 text-slate-800",["type","button"],["id","close-form"]),d=n("span","material-symbols-rounded bg-slate-300/25 hover:bg-slate-400/25 active:bg-slate-600/25 transition-colors rounded-full p-1");d.textContent="close",r.appendChild(d),o.appendChild(r);const u=a("w-full hidden h-full z-20 fixed top-0 left-0 grid items-center justify-center bg-slate-900/25 backdrop-blur-[2px]","start-loading"),m=a("custom-loader");let g,p,f;u.appendChild(m),o.appendChild(u),g=a(i),p=n("label",l,["for","number-of-questions"]),p.textContent="Number of Questions",f=n("input",c,["type","number"],["id","number-of-questions"],["name","amount"],["min","1"],["max","50"],["step","1"],["value","10"],["required",!0]),e(g,[p,f]),o.appendChild(g),g=a(i),p=n("label",l,["for","category"]),p.textContent="Select Category",f=n("select",c,["name","category"],["id","category"],["name","category"],["required",!0]),s.categories.forEach(((t,e)=>{let a;a="Any Category"===t?"any":e+8;const o=n("option","text-sm",["value",`${a}`]);o.textContent=t,f.appendChild(o)})),e(g,[p,f]),o.appendChild(g),g=a(i),p=n("label",l,["for","difficulty"]),p.textContent="Select Difficulty",f=n("select",c,["name","difficulty"],["id","difficulty"],["required",!0]),Object.entries(s.difficulties).forEach((t=>{const[e,a]=t,o=n("option","text-sm",["value",`${e}`]);o.textContent=a,f.appendChild(o)})),e(g,[p,f]),o.appendChild(g),g=a("w-full p-2");const h=n("button","text-center w-full rounded-lg bg-slate-900 hover:bg-slate-800 active:bg-slate-700 font-bold transition-colors py-2 text-slate-50",["type","submit"]);return h.textContent="Start",g.appendChild(h),o.appendChild(h),t.appendChild(o),t}static createLandingPage(){const t=a("grid place-content-center w-full h-full duration-500 transition-all scale-0","landing-page"),o=n("header","grid md:justify-items-center gap-4 place-content-center transition-opacity"),r=n("h1","text-5xl font-extrabold sm:text-6xl md:text-7xl lg:text-8xl font-display");r.textContent="MoreTrivia";const s=n("button","rounded-lg border-2 mx-2 hover:bg-slate-100/25 active:bg-slate-100 focus:bg-slate-100/25 active:text-slate-950 active:border-slate-950 font-bold transition-colors md:text-xl md:w-3/5 py-2",["id","start-game-button"]);return s.textContent="Start",e(o,[r,s]),t.appendChild(o),t}static createGameTemplate(){const t=a("grid grid-rows-[auto_minmax(0,1fr)_auto] gap-10 h-screen sm:p-5 duration-500 transition-opacity opacity-0","game-container"),o=a("grid sm:place-self-end","home"),r=n("button","p-2 m-2 font-bold rounded-lg bg-blue-900/25 shadow-sm sm:px-4 md:text-lg lg:text-xl lg:px-6 hover:bg-blue-900/40 active:bg-sky-800/50 transition-colors");r.textContent="Home Screen",o.appendChild(r);const s=a("grid mx-4 max-h-full col-start-1 col-end-1 row-start-2 row-end-3 grid-rows-2","questions-container"),i=a("w-auto mx-4 bg-slate-200 rounded-full h-2.5 mb-4 grid"),c=a("bg-blue-600 h-2.5 transition-[width] duration-1000 delay-200 rounded-full","progress-bar");return c.style.width="0%",i.appendChild(c),e(t,[o,s,i]),t}static#t(t,e){const a=n("div","grid gap-4 content-center p-2 my-4 lg:w-[50%] lg:mx-auto lg:grid-cols-2",["id","options"]),o=e,r=Math.floor(4*Math.random());return o.splice(r,0,t),o.forEach((t=>{const e=n("button",u,["data-answer","na"],["data-value",`${t}`]);e.textContent=t,a.appendChild(e)})),a}static#e(){const t=n("div","grid grid-cols-2 gap-4 content-center p-4 lg:grid-cols-1 lg:grid-rows-[auto_auto] lg:w-[33%] lg:mx-auto",["id","options"]),a=n("button",m,["data-answer","na"],["data-value","True"]);a.textContent="True";const o=n("button",m,["data-answer","na"],["data-value","False"]);return o.textContent="False",e(t,[a,o]),t}static createQuestionContainer(t,o){const r=a("grid mx-4 max-h-full col-start-1 col-end-1 duration-1000 ease-in-out row-start-2 row-end-3 grid-rows-2 opacity-0 transition-opacity","questions-container"),s=a("bg-slate-200/10 relative rounded-2xl max-h-full px-2 py-6 lg:p-10 gap-1 grid lg:mx-[10%]"),i=n("span","font-bold px-4 py-1 text-xl bg-slate-50 text-slate-800 w-12 h-12 grid place-content-center italic rounded-full absolute top-0 left-10 lg:left-20 -translate-y-2/4 -translate-x-2/4 lg:w-20 lg:h-20 lg:text-3xl",["id","index"]);i.textContent=`#${t+1}`;const c=n("p",d);c.innerHTML=o.question.toString(),e(s,[i,c]),r.appendChild(s);let l=a();return"boolean"===o.type?l=this.#e():"multiple"===o.type&&(l=this.#t(o.correct_answer,o.incorrect_answers)),r.appendChild(l),r}static createGameOverScreen=function(t,o){const r=a("grid gap-2 w-full h-full content-center duration-500 text-center sm:w-80 mx-auto transition-opacity opacity-0","game-over-container"),s=n("h2","text-4xl p-2 font-bold font-display");s.textContent="Trivia Quiz Ended";const i=a("bg-slate-50 p-2 sm:rounded-lg text-slate-950"),c=n("p","text-lg font-thin text-slate-950/70");c.textContent="Your Score";const l=a("flex gap-2 items-center text-5xl p-1 justify-center opacity-0 transition-opacity duration-500","score-container"),d=n("span","font-semibold",["id","score"]);d.classList.add(`${g[Math.floor(t/o*(g.length-1))]}`),d.textContent=t;const u=n("span","text-2xl font-thin");u.textContent="/";const m=n("span","font-semibold",["id","max-score"]);m.textContent=o,e(l,[d,u,m]),e(i,[c,l]);const p=n("button","p-3 font-bold rounded-lg bg-blue-900/25 shadow-sm hover:bg-blue-900/40 active:bg-sky-800/50 transition-colors m-4 border-2 border-slate-50 sm:mx-0 md:text-lg lg:text-xl lg:px-6",["id","home-screen-button"]);return p.textContent="Home Screen",e(r,[s,i,p]),r}},f=class{static#n;static#a="https://opentdb.com/api_token.php";static async getToken(){if(!this.#n){const e=JSON.parse(localStorage.getItem("token"));e?this.#n=e:(this.#n=await this.#o(),t=this.#n,localStorage.setItem("token",JSON.stringify(t)))}var t;return this.#n}static async#o(){const t=await fetch(`${this.#a}?command=request`,{mode:"cors"});if(!t.ok||200!==t.status)throw new Error(t.statusText);const e=await t.json();if(0===e.response_code)return e.token;throw new Error(e.response_message)}static async resetToken(){if(this.#n){const t=await fetch(`${this.#a}?command=request&token=${this.#n}`,{mode:"cors"});if(!t.ok||200!==t.status)throw new Error(t.statusText);const e=await t.json();if(0!==e.response_code)throw new Error("renewal failed");this.#n=e.token}}static deleteToken(){this.#n=null,localStorage.removeItem("token")}};class h extends Error{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Error";for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,h),this.name="CustomError",this.errorHeader=t}}const y=h,b=class{static#r="https://opentdb.com/api.php";static#s="https://opentdb.com/api_count.php";static async getMaxAmount(t,e){if("any"===t)return 500;const n=await fetch(`${this.#s}?category=${t}`,{mode:"cors"});if(n.ok&&200===n.status){const t=`_${e}`;return(await n.json()).category_question_count[`total${"any"===e?"":t}_question_count`]}throw new Error(n.statusText)}static async#i(t){return 1===t?new y("No Results","Could not return results. The API doesn't have enough questions for your query."):2===t?new y("Invalid Parameter","Contains an invalid parameter. Arguments passed in aren't valid."):3===t?(f.deleteToken(),new y("Token Not Found","Session Token does not exist.")):4===t?(f.resetToken(),new y("Token Empty","Session Token has returned all possible questions for the specified query. Resetting the Token is necessary.")):5===t?new y("Rate Limit","Too many requests have occurred. Each IP can only access the API once every 5 seconds."):new Error("Something Strange happened")}static async fetchTriviaData(t,e,n,a){const o="any"===e?"":`&category=${e}`,r="any"===n?"":`&difficulty=${n}`,s=void 0===a?"":`&token=${a}`,i=await fetch(`${this.#r}?amount=${t}${o}${r}${s}`,{mode:"cors"});if(!i.ok||200!==i.status)throw new Error(i.statusText);const c=await i.json();if(0===c.response_code)return c;throw this.#i(c.response_code)}};let x,w,v,E;const C=function(){return x.length},k=function(){return v},A=function(t){return t===x[v].correct_answer};let S,L,T;const q=function(){S||(S=!0,document.getElementById("start-loading").classList.remove("hidden"))},I=function(){S&&(document.getElementById("start-loading").classList.add("hidden"),S=!1)},_=async function(){const t=document.getElementById("category").value,e=document.getElementById("difficulty").value;try{q();let n=await b.getMaxAmount(t,e);I(),n=Math.min(n,50);const a=document.getElementById("number-of-questions");a.setAttribute("max",n);const o=a.value;a.value=Math.min(n,o)}catch(t){!function(t){console.error(t)}(t)}},$=async function(){const t=document.getElementById("start-form-container"),e=t.querySelector("form"),n=o(e);e.classList.remove("scale-y-100"),document.querySelector("#landing-page header").classList.remove("opacity-0"),await r(1e3*n+10),t.remove()},B=async function(){const t=document.body.firstElementChild,e=o(t);t.style.opacity="0",await r(1e3*e+100),t.remove(),await r(10),j()},M=async function t(){const e=(v+=1,x[v]?x[v]:null);if(null===e)return void await async function(){let t;const e=document.getElementById("game-container");e&&(e.style.opacity="0",t=o(e),await r(1e3*t+10),e.remove());const n=p.createGameOverScreen(E,C());document.body.appendChild(n),await r(20),n.style.opacity="1",t=o(n),await r(1e3*t+10),document.getElementById("score-container").style.opacity="1",document.getElementById("home-screen-button").addEventListener("click",B)}();let n=document.getElementById("questions-container");if(n){const t=o(n);n.classList.add("opacity-0"),n.classList.remove("opacity-100"),await r(1e3*t+10),n.remove()}n=p.createQuestionContainer(k(),e),document.getElementById("home").insertAdjacentElement("afterend",n),await r(20),"multiple"===e.type&&document.querySelectorAll("#options button").forEach((t=>{(t=>{let{clientWidth:e,clientHeight:n,scrollWidth:a,scrollHeight:o}=t;return o>n||a>e})(t)&&(t.classList.remove("text-2xl"),t.classList.add("text-sm"))})),n.classList.add("opacity-100"),L=!1;const a=async function(){if(!L){L=!0;const n=(e=this.getAttribute("data-value"),w=e,!!A(w)&&(E+=1,!0));let a=0,s=0;n?this.setAttribute("data-answer","correct"):(this.setAttribute("data-answer","wrong"),a=o(this),s=getComputedStyle(this).getPropertyValue("animation-iteration-count")),document.querySelectorAll("#options button").forEach((t=>{t.setAttribute("disabled",""),t!==this&&(t.removeAttribute("data-answer"),!n&&A(t.getAttribute("data-value"))&&t.setAttribute("data-answer","correct"))}));const i=Math.max(a*s*1e3,1e3);await r(i+500),await async function(){const t=document.getElementById("progress-bar"),e=o(t);t.style.width=`${Math.round((k()+1)/C()*100)}%`,await r(1e3*e+10)}(),t()}var e};document.querySelectorAll("#options button").forEach((t=>{t.addEventListener("click",a,{once:!0})}))},H=function(){if(S||T)return;const e=p.createStartForm(),n=document.getElementById("landing-page");e.querySelector("form").classList.add("scale-y-0"),n.appendChild(e),setTimeout((()=>{e.querySelector("form").classList.add("scale-y-100"),n.querySelector("header").classList.add("opacity-0")}),10),document.getElementById("close-form").addEventListener("click",$),e.querySelector("#category").addEventListener("change",_),e.querySelector("#difficulty").addEventListener("change",_),e.querySelector("form").addEventListener("submit",(async e=>{if(e.preventDefault(),S||T)return;const n=Array.from(new FormData(e.target)),a=n[0][1],s=n[1][1],i=n[2][1];q();const c=await async function(e,n,a){try{const o=await f.getToken(),r=await b.fetchTriviaData(e,n,a,o);return x=function(e){const n=[];return e.forEach((e=>{const a=e;if(a.question=t(a.question),a.correct_answer=t(a.correct_answer),"multiple"===a.type){const e=[];a.incorrect_answers.forEach((n=>{e.push(t(n))})),a.incorrect_answers=e}n.push(a)})),n}(r.results),console.log(x),!0}catch(t){return!1}}(a,s,i);I(),c&&(T=!0,await async function(){const t=document.getElementById("landing-page");await $();let e=o(t);t.classList.add("opacity-0"),t.classList.remove("opacity-100"),await r(2*e*1e3+10),t.remove();const n=p.createGameTemplate();document.body.appendChild(n),await r(10),n.classList.add("opacity-100"),e=o(n),await r(1e3*e+10),n.querySelector("#home button").addEventListener("click",B)}(),E=0,v=-1,await M())}))};async function j(){document.body.replaceChildren(),S=!1,T=!1,L=!1;const t=p.createLandingPage();document.body.appendChild(t),await r(10),t.classList.remove("scale-0"),document.getElementById("start-game-button").addEventListener("click",H)}document.documentElement.setAttribute("class","font-sans"),document.body.setAttribute("class","bg-slate-950 w-screen h-screen text-slate-50 grid items-center"),j()})();
//# sourceMappingURL=app9194a5cce2e6c1393069.js.map