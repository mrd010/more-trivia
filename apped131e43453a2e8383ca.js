(()=>{"use strict";const t=function(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent};function e(t,e){e.forEach((e=>t.appendChild(e)))}function n(t,e){const n=document.createElement(t);void 0!==e&&n.classList.add(e);for(var o=arguments.length,a=new Array(o>2?o-2:0),r=2;r<o;r++)a[r-2]=arguments[r];return a.forEach((t=>{n.setAttribute(t[0],t[1])})),n}function o(t,e){const n=document.createElement(t);void 0!==e&&n.setAttribute("class",e);for(var o=arguments.length,a=new Array(o>2?o-2:0),r=2;r<o;r++)a[r-2]=arguments[r];return a.forEach((t=>{n.setAttribute(t[0],t[1])})),n}const a=function(t,e){const o=n("div",void 0);return void 0!==t&&o.setAttribute("class",t),void 0!==e&&o.setAttribute("id",e),o};function r(t,e,o){const a=n("span",e);return a.classList.add(`material-symbols-${t}`),a.textContent=` ${o} `,a}const s=function(t){return Number(getComputedStyle(t).getPropertyValue("transition-duration").slice(0,-1))},i=async function(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))},c={difficulties:{any:"Any Difficulty",easy:"Easy",medium:"Medium",hard:"Hard"},categories:["Any Category","General Knowledge","Entertainment: Books","Entertainment: Film","Entertainment: Music","Entertainment: Musicals, Theaters","Entertainment: Television","Entertainment: Video Games","Entertainment: Board Games","Science: Nature","Science: Computers","Science: Mathematics","Mythology","Sports","Geography","History","Politics","Art","Celebrities","Animals","Vehicles","Entertainment: Comics","Science: Gadgets","Entertainment: Anime, Manga","Entertainment: Cartoon, Animations"]},l="w-full flex flex-col p-2 gap-1",d="px-2 py-1 w-full rounded-md border-2 border-slate-900/5 bg-slate-400/20",u="text-sm text-slate-950/75 font-medium ml-2",m="text-center overflow-y-auto font-medium text-xl leading-normal  px-6 pt-6 sm:text-2xl md:text-3xl lg:leading-relaxed max-h-full",g="border-2 data-na:hover:bg-green-600/10 bg-slate-900  transition-colors font-medium capitalize data-na:active:bg-slate-50/25 grid place-items-center text-center lg:text-2xl rounded-xl h-10 lg:h-20 lg:w-full data-correct:border-green-500 data-correct:bg-green-800 data-wrong:border-red-500 data-wrong:bg-red-800 data-na:hover:border-green-500 data-correct:animate-ping-once data-wrong:animate-pulse-fast duration-300",p="grid h-20 cursor-pointer place-items-center rounded-xl border-2 bg-slate-900 text-center text-lg font-bold capitalize shadow-inner transition-colors data-na:hover:bg-green-600/10 data-na:active:bg-slate-50/40 data-correct:border-green-500 data-correct:bg-green-800 data-wrong:border-red-500 data-wrong:bg-red-800 data-na:hover:border-green-500 sm:text-2xl lg:w-full data-correct:animate-ping-once data-wrong:animate-pulse-fast duration-300",f=["text-red-800","text-orange-800","text-amber-700","text-yellow-700","text-lime-700","text-green-600","text-emerald-600"],y=class{static createStartForm(t){const n=a("absolute z-10 rounded-lg w-full h-full grid items-center","start-form-container"),r=o("form","grid bg-slate-100 gap-2 px-2 py-4 transition-transform duration-500 rounded-md text-slate-950 w-4/5 mx-auto max-w-md",["action","#"]),s=o("button","justify-self-end mr-2 text-slate-800",["type","button"],["id","close-form"]),i=o("span","material-symbols-rounded bg-slate-300/25 hover:bg-slate-400/25 active:bg-slate-600/25 transition-colors rounded-full p-1");i.textContent="close",s.appendChild(i),r.appendChild(s);const m=a("w-full hidden h-full z-20 fixed top-0 left-0 grid items-center justify-center bg-slate-900/25 backdrop-blur-[2px]","start-loading"),g=a("custom-loader");let p,f,y;m.appendChild(g),r.appendChild(m),p=a(l),f=o("label",u,["for","number-of-questions"]),f.textContent="Number of Questions",y=o("input",d,["type","number"],["id","number-of-questions"],["name","amount"],["min","1"],["max","50"],["step","1"],["value",t.amount],["required",!0]),e(p,[f,y]),r.appendChild(p),p=a(l),f=o("label",u,["for","category"]),f.textContent="Select Category",y=o("select",d,["name","category"],["id","category"],["name","category"],["required",!0]),c.categories.forEach(((t,e)=>{let n;n="Any Category"===t?"any":e+8;const a=o("option","text-sm",["value",`${n}`]);a.textContent=t,y.appendChild(a)})),y.value=t.category,e(p,[f,y]),r.appendChild(p),p=a(l),f=o("label",u,["for","difficulty"]),f.textContent="Select Difficulty",y=o("select",d,["name","difficulty"],["id","difficulty"],["required",!0]),Object.entries(c.difficulties).forEach((t=>{const[e,n]=t,a=o("option","text-sm",["value",`${e}`]);a.textContent=n,y.appendChild(a)})),y.value=t.difficulty,e(p,[f,y]),r.appendChild(p),p=a("w-full p-2");const h=o("button","text-center w-full rounded-lg bg-slate-900 hover:bg-slate-800 active:bg-slate-700 font-bold transition-colors py-2 text-slate-50",["type","submit"]);return h.textContent="Start",p.appendChild(h),r.appendChild(h),n.appendChild(r),n}static createLandingPage(){const t=a("grid place-content-center w-full h-full duration-500 transition-all scale-0","landing-page"),n=o("header","grid md:justify-items-center gap-4 place-content-center transition-opacity"),r=o("h1","text-5xl font-extrabold sm:text-6xl md:text-7xl lg:text-8xl font-display");r.textContent="MoreTrivia";const s=o("button","rounded-lg border-2 mx-2 hover:bg-slate-100/25 active:bg-slate-100 focus:bg-slate-100/25 active:text-slate-950 active:border-slate-950 font-bold transition-colors md:text-xl md:w-3/5 py-2",["id","start-game-button"]);return s.textContent="Start",e(n,[r,s]),t.appendChild(n),t}static createGameTemplate(){const t=a("grid grid-rows-[auto_minmax(0,1fr)_auto] gap-10 h-screen sm:p-5 duration-500 transition-opacity opacity-0","game-container"),n=a("grid sm:place-self-end","home"),r=o("button","p-2 m-2 font-bold rounded-lg bg-blue-900/25 shadow-sm sm:px-4 md:text-lg lg:text-xl lg:px-6 hover:bg-blue-900/40 active:bg-sky-800/50 transition-colors");r.textContent="Home Screen",n.appendChild(r);const s=a("grid mx-4 max-h-full col-start-1 col-end-1 row-start-2 row-end-3 grid-rows-2","questions-container"),i=a("w-auto mx-4 bg-slate-200 rounded-full h-2.5 mb-4 grid"),c=a("bg-blue-600 h-2.5 transition-[width] duration-1000 delay-200 rounded-full","progress-bar");return c.style.width="0%",i.appendChild(c),e(t,[n,s,i]),t}static#t(t,e){const n=o("div","grid gap-4 content-center p-2 my-4 lg:w-[50%] lg:mx-auto lg:grid-cols-2",["id","options"]),a=e,r=Math.floor(4*Math.random());return a.splice(r,0,t),a.forEach((t=>{const e=o("button",g,["data-answer","na"],["data-value",`${t}`]);e.textContent=t,n.appendChild(e)})),n}static#e(){const t=o("div","grid grid-cols-2 gap-4 content-center p-4 lg:grid-cols-1 lg:grid-rows-[auto_auto] lg:w-[33%] lg:mx-auto",["id","options"]),n=o("button",p,["data-answer","na"],["data-value","True"]);n.textContent="True";const a=o("button",p,["data-answer","na"],["data-value","False"]);return a.textContent="False",e(t,[n,a]),t}static createQuestionContainer(t,n){const r=a("grid mx-4 max-h-full col-start-1 col-end-1 duration-1000 ease-in-out row-start-2 row-end-3 grid-rows-2 opacity-0 transition-opacity","questions-container"),s=a("bg-slate-200/10 relative rounded-2xl max-h-full px-2 py-6 lg:p-10 gap-1 grid lg:mx-[10%]"),i=o("span","font-bold px-4 py-1 text-xl bg-slate-50 text-slate-800 w-12 h-12 grid place-content-center italic rounded-full absolute top-0 left-10 lg:left-20 -translate-y-2/4 -translate-x-2/4 lg:w-20 lg:h-20 lg:text-3xl",["id","index"]);i.textContent=`#${t+1}`;const c=o("p",m);c.innerHTML=n.question.toString(),e(s,[i,c]),r.appendChild(s);let l=a();return"boolean"===n.type?l=this.#e():"multiple"===n.type&&(l=this.#t(n.correct_answer,n.incorrect_answers)),r.appendChild(l),r}static createGameOverScreen=function(t,n){const r=a("grid gap-2 w-full h-full content-center duration-500 text-center sm:w-80 mx-auto transition-opacity opacity-0","game-over-container"),s=o("h2","text-4xl p-2 font-bold font-display");s.textContent="Trivia Quiz Ended";const i=a("bg-slate-50 p-2 sm:rounded-lg text-slate-950"),c=o("p","text-lg font-thin text-slate-950/70");c.textContent="Your Score";const l=a("flex gap-2 items-center text-5xl p-1 justify-center opacity-0 transition-opacity duration-500","score-container"),d=o("span","font-semibold",["id","score"]);d.classList.add(`${f[Math.floor(t/n*(f.length-1))]}`),d.textContent=t;const u=o("span","text-2xl font-thin");u.textContent="/";const m=o("span","font-semibold",["id","max-score"]);m.textContent=n,e(l,[d,u,m]),e(i,[c,l]);const g=o("button","p-3 font-bold rounded-lg bg-blue-900/25 shadow-sm hover:bg-blue-900/40 active:bg-sky-800/50 transition-colors m-4 border-2 border-slate-50 sm:mx-0 md:text-lg lg:text-xl lg:px-6",["id","home-screen-button"]);return g.textContent="Home Screen",e(r,[s,i,g]),r};static createConfirmAlert=function(){const t=a("bg-slate-50 text-slate-950 p-4 rounded-lg flex flex-col items-center gap-2 mx-4 sm:w-max sm:justify-self-center","confirm-container"),n=o("p","px-4 text-lg");n.textContent="Abandon current session and start a new game?",t.appendChild(n);const s=a("grid grid-cols-2 items-center gap-5 py-2"),i=o("button","grid grid-cols-[auto_100px] rounded-md text-slate-50 font-semibold items-center bg-green-700 active:bg-green-800 opacity-90 hover:opacity-100 transition-colors",["id","yes-button"]);let c=r("rounded","px-2","close"),l=o("span","border-l border-slate-100/40 py-2");l.textContent="Yes",e(i,[c,l]);const d=o("button","grid grid-cols-[auto_100px] rounded-md text-slate-50 font-semibold items-center bg-red-700 active:bg-red-800 opacity-90 hover:opacity-100 transition-colors",["id","no-button"]);return c=r("rounded","px-2","done"),l=o("span","border-l border-slate-100/40 py-2"),l.textContent="No",e(d,[c,l]),e(s,[i,d]),t.appendChild(s),t};static createErrorElement=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error";const r=a("fixed top-0 m-6 rounded-lg border-2 border-slate-50 bg-red-700/80 hover:bg-red-700/100 opacity-90 hover:opacity-100 transition-all shadow-md p-2"),s=o("h3","text-slate-50 text-lg font-bold md:text-xl");s.textContent=n;const i=o("p","text-sm font-medium text-slate-50 md:text-md");return i.textContent=t,e(r,[s,i]),r}},h=class{static#n;static#o="https://opentdb.com/api_token.php";static async getToken(){if(!this.#n){const e=JSON.parse(localStorage.getItem("token"));if(e)this.#n=e;else{const e=await this.#a();if(e instanceof Error)return e;this.#n=e,t=this.#n,localStorage.setItem("token",JSON.stringify(t))}}var t;return this.#n}static async#a(){const t=await fetch(`${this.#o}?command=request`,{mode:"cors"});if(!t.ok||200!==t.status)throw new Error(t.statusText);const e=await t.json();return 0===e.response_code?e.token:new Error(e.response_message)}static async resetToken(){if(this.#n){const t=await fetch(`${this.#o}?command=request&token=${this.#n}`,{mode:"cors"});if(!t.ok||200!==t.status)throw new Error(t.statusText);const e=await t.json();if(0!==e.response_code)throw new Error("renewal failed");this.#n=e.token}}static deleteToken(){this.#n=null,localStorage.removeItem("token")}};class b extends Error{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Error";for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,b),this.name="CustomError",this.errorHeader=t}}const x=b,w=class{static#r="https://opentdb.com/api.php";static#s="https://opentdb.com/api_count.php";static async getMaxAmount(t,e){if("any"===t)return 500;const n=await fetch(`${this.#s}?category=${t}`,{mode:"cors"});if(n.ok&&200===n.status){const t=`_${e}`;return(await n.json()).category_question_count[`total${"any"===e?"":t}_question_count`]}throw new Error(n.statusText)}static async#i(t){return 1===t?new x("No Results","Could not return results. The API doesn't have enough questions for your query."):2===t?new x("Invalid Parameter","Contains an invalid parameter. Arguments passed in aren't valid."):3===t?(h.deleteToken(),new x("Token Not Found","Session Token does not exist.")):4===t?(h.resetToken(),new x("Token Empty","Session Token has returned all possible questions for the specified query. Resetting the Token is necessary.")):5===t?new x("Rate Limit","Too many requests have occurred. Each IP can only access the API once every 5 seconds."):new Error("Something Strange happened")}static async fetchTriviaData(t,e,n,o){const a="any"===e?"":`&category=${e}`,r="any"===n?"":`&difficulty=${n}`,s=void 0===o?"":`&token=${o}`,i=await fetch(`${this.#r}?amount=${t}${a}${r}${s}`,{mode:"cors"});if(!i.ok||200!==i.status)throw new Error(i.statusText);const c=await i.json();return 0===c.response_code?c:this.#i(c.response_code)}};let v,E,C,k;const S=function(){return v.length},A=function(){return C},L=function(t){return t===v[C].correct_answer};let T,q,I;const _=function(){T||(T=!0,document.getElementById("start-loading").classList.remove("hidden"))},$=function(){T&&(document.getElementById("start-loading").classList.add("hidden"),T=!1)},B=function(t){const e=y.createErrorElement(t.message,t.errorHeader);document.getElementById("start-form-container").appendChild(e),setTimeout((()=>{e.remove()}),5e3)},M=async function(){const t=document.getElementById("category").value,e=document.getElementById("difficulty").value;try{_();let n=await w.getMaxAmount(t,e);$(),n=Math.min(n,50);const o=document.getElementById("number-of-questions");o.setAttribute("max",n);const a=o.value;o.value=Math.min(n,a)}catch(t){B(t)}},N=async function(){const t=document.getElementById("start-form-container"),e=t.querySelector("form"),n=s(e);e.classList.remove("scale-y-100"),document.querySelector("#landing-page header").classList.remove("opacity-0"),await i(1e3*n+10),t.remove()},H=async function(){const t=document.body.firstElementChild,e=s(t);t.style.opacity="0",await i(1e3*e+100),t.remove(),await i(10),P()},j=async function t(){const e=(C+=1,v[C]?v[C]:null);if(null===e)return void await async function(){let t;const e=document.getElementById("game-container");e&&(e.style.opacity="0",t=s(e),await i(1e3*t+10),e.remove());const n=y.createGameOverScreen(k,S());document.body.appendChild(n),await i(20),n.style.opacity="1",t=s(n),await i(1e3*t+10),document.getElementById("score-container").style.opacity="1",document.getElementById("home-screen-button").addEventListener("click",H)}();let n=document.getElementById("questions-container");if(n){const t=s(n);n.classList.add("opacity-0"),n.classList.remove("opacity-100"),await i(1e3*t+10),n.remove()}n=y.createQuestionContainer(A(),e),document.getElementById("home").insertAdjacentElement("afterend",n),await i(20),"multiple"===e.type&&document.querySelectorAll("#options button").forEach((t=>{(t=>{let{clientWidth:e,clientHeight:n,scrollWidth:o,scrollHeight:a}=t;return a>n||o>e})(t)&&(t.classList.remove("text-2xl"),t.classList.add("text-sm"))})),n.classList.add("opacity-100"),q=!1;const o=async function(){if(!q){q=!0;const n=(e=this.getAttribute("data-value"),E=e,!!L(E)&&(k+=1,!0));let o=0,a=0;n?this.setAttribute("data-answer","correct"):(this.setAttribute("data-answer","wrong"),o=s(this),a=getComputedStyle(this).getPropertyValue("animation-iteration-count")),document.querySelectorAll("#options button").forEach((t=>{t.setAttribute("disabled",""),t!==this&&(t.removeAttribute("data-answer"),!n&&L(t.getAttribute("data-value"))&&t.setAttribute("data-answer","correct"))}));const r=Math.max(o*a*1e3,1e3);await i(r+500),await async function(){const t=document.getElementById("progress-bar"),e=s(t);t.style.width=`${Math.round((A()+1)/S()*100)}%`,await i(1e3*e+10)}(),t()}var e};document.querySelectorAll("#options button").forEach((t=>{t.addEventListener("click",o,{once:!0})}))},O=function(){if(T||I)return;const e=JSON.parse(localStorage.getItem("settings"))||{amount:10,category:"any",difficulty:"any"},n=y.createStartForm(e),o=document.getElementById("landing-page");n.querySelector("form").classList.add("scale-y-0"),o.appendChild(n),setTimeout((()=>{n.querySelector("form").classList.add("scale-y-100"),o.querySelector("header").classList.add("opacity-0")}),10),document.getElementById("close-form").addEventListener("click",N),n.querySelector("#category").addEventListener("change",M),n.querySelector("#difficulty").addEventListener("change",M),n.querySelector("form").addEventListener("submit",(async e=>{if(e.preventDefault(),T||I)return;const n=Array.from(new FormData(e.target)),o=Number(n[0][1]),a=n[1][1],r=n[2][1];let c;_();try{if(c=await async function(e,n,o){const a=await h.getToken();if(a instanceof Error)return a;const r=await w.fetchTriviaData(e,n,o,a);return r instanceof Error?r:(v=function(e){const n=[];return e.forEach((e=>{const o=e;if(o.question=t(o.question),o.correct_answer=t(o.correct_answer),"multiple"===o.type){const e=[];o.incorrect_answers.forEach((n=>{e.push(t(n))})),o.incorrect_answers=e}n.push(o)})),n}(r.results),!0)}(o,a,r),c instanceof Error)throw c;$(),I=!0,function(t){localStorage.setItem("settings",JSON.stringify(t))}({amount:o,category:a,difficulty:r}),await async function(){const t=document.getElementById("landing-page");await N();let e=s(t);t.classList.add("opacity-0"),t.classList.remove("opacity-100"),await i(2*e*1e3+10),t.remove();const n=y.createGameTemplate();document.body.appendChild(n),await i(10),n.classList.add("opacity-100"),e=s(n),await i(1e3*e+10),n.querySelector("#home button").addEventListener("click",(()=>{I&&function(){const t=y.createConfirmAlert(),e=document.getElementById("game-container");e.classList.add("hidden"),document.body.appendChild(t),t.querySelector("#no-button").addEventListener("click",(()=>{t.remove(),e.classList.remove("hidden")})),t.querySelector("#yes-button").addEventListener("click",H)}()}))}(),k=0,C=-1,await j()}catch(t){B(t),$()}}))};async function P(){document.body.replaceChildren(),T=!1,I=!1,q=!1;const t=y.createLandingPage();document.body.appendChild(t),await i(10),t.classList.remove("scale-0"),document.getElementById("start-game-button").addEventListener("click",O)}document.documentElement.setAttribute("class","font-sans"),document.body.setAttribute("class","bg-slate-950 w-screen h-screen text-slate-50 grid items-center"),P()})();
//# sourceMappingURL=apped131e43453a2e8383ca.js.map